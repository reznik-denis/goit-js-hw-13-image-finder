{"version":3,"sources":["webpack:///./js/apiService.js","webpack:///./js/notise.js","webpack:///./index.js","webpack:///./js/open-modal.js","webpack:///./templates/listImages.hbs"],"names":["ImageApiService","this","searchQuery","page","URL","KEY","perPage","fetchImages","fetch","response","json","incrementPage","restPage","newQuery","defaultOptions","styling","width","mode","delay","maxTextHeight","myStack","Stack","dir1","dir2","firstpos1","firstpos2","modal","overlayClose","imageApiService","refs","inputForm","document","querySelector","galeryImages","sentinel","card","onSerch","query","value","clearCountysContainer","fetchImageslist","error","console","log","appendImagesMarkup","listImages","insertAdjacentHTML","listImagesTpl","then","images","noticeOnSearchInput","innerHTML","title","text","stack","hits","length","addEventListener","debounce","event","target","nodeName","basicLightbox","dataset","src","show","window","evt","code","preventDefault","IntersectionObserver","entries","forEach","entry","isIntersecting","rootMargin","observe","Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop"],"mappings":"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","file":"main.359193666fdc2ac9b83f.js","sourcesContent":["export default class ImageApiService {\r\n    constructor () {\r\n        this.searchQuery = '';\r\n        this.page = 1;\r\n        this.URL = 'https://pixabay.com/api/';\r\n        this.KEY = '19046001-7d44b7f00f708df4674bb235b';\r\n        this.perPage = 12;\r\n    }\r\n\r\n    async fetchImages() {\r\n    const response = await fetch(`${this.URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=${this.perPage}&key=${this.KEY}`)\r\n    return await response.json();\r\n    };\r\n\r\n    incrementPage() {\r\n        this.page += 1;\r\n    }\r\n\r\n    restPage() {\r\n        this.page = 1;\r\n    }\r\n\r\n    get query() {\r\n        return this.searchQuery;\r\n    }\r\n\r\n    set query(newQuery) {\r\n        this.searchQuery = newQuery;\r\n    }\r\n}\r\n    \r\n    ","import { error, Stack } from \"@pnotify/core\";\r\nimport \"@pnotify/core/dist/PNotify.css\";\r\nimport \"@pnotify/core/dist/BrightTheme.css\";\r\n\r\nconst defaultOptions = {\r\n    styling: 'brighttheme',\r\n    width: '400px',\r\n    mode: 'light',\r\n    delay: 3000,\r\n    maxTextHeight: null,\r\n}\r\n\r\nconst myStack = new Stack({\r\n  dir1: 'up',\r\n  dir2: 'left',\r\n  firstpos1: 90,\r\n  firstpos2: 90, \r\n  modal: true,\r\n  overlayClose: false,\r\n});\r\n\r\nexport function noticeEmptyQuery() {\r\n  error({\r\n    title: 'ERROR!',\r\n    text:\r\n      \"You entered an empty query!\",\r\n    ...defaultOptions,\r\n    stack: myStack,\r\n  });\r\n}\r\n\r\nexport function noticeNoImages() {\r\n  error({\r\n    title: 'ERROR!',\r\n    text:\r\n      \"Sorry, no images found!!\",\r\n    ...defaultOptions,\r\n    stack: myStack,\r\n  });\r\n}","import './styles.css';\r\nimport debounce from 'lodash.debounce';\r\n\r\nimport onOpenModal from './js/open-modal.js';\r\nimport listImagesTpl from './templates/listImages.hbs';\r\nimport ImageApiService from './js/apiService.js';\r\nimport { noticeEmptyQuery, noticeNoImages } from './js/notise.js';\r\n\r\nconst imageApiService = new ImageApiService();\r\n\r\nconst refs = {\r\n  inputForm: document.querySelector('.form-control'),\r\n  galeryImages: document.querySelector('.gallery'),\r\n  sentinel: document.querySelector('#sentinel'),\r\n  card: document.querySelector('.photo-card'),\r\n};\r\n\r\nrefs.inputForm.addEventListener('input', debounce(onInputSerch, 1000));\r\nrefs.galeryImages.addEventListener('click', onOpenModal);\r\nwindow.addEventListener('keydown', onKeydownEnter);\r\n\r\nfunction onInputSerch() {\r\n  if (imageApiService.page === 2) {\r\n    return\r\n  } else {\r\n    onSerch();\r\n  };\r\n};\r\n\r\nasync function onSerch() {\r\n  try {\r\n    imageApiService.query = refs.inputForm.value;\r\n    imageApiService.restPage();\r\n    clearCountysContainer();\r\n    fetchImageslist();\r\n    imageApiService.incrementPage();\r\n  } catch (error) {\r\n    console.log(error);\r\n    console.log('Ваш запит не виконано. Помилка');\r\n  }\r\n};\r\n\r\nfunction appendImagesMarkup(listImages) {\r\n  refs.galeryImages.insertAdjacentHTML('beforeend', listImagesTpl(listImages));\r\n};\r\n\r\nasync function fetchImageslist() {\r\n  try {\r\n    imageApiService.fetchImages().then(images => {\r\n      noticeOnSearchInput(images);\r\n      appendImagesMarkup(images);\r\n      // if (images.hits.length < 12) {\r\n      //   loadMoreBtn.hide();\r\n      // } else {\r\n      //   loadMoreBtn.show();\r\n      // }\r\n    });\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n};\r\n  \r\nfunction clearCountysContainer() {\r\n  refs.galeryImages.innerHTML = '';\r\n};\r\n\r\nfunction noticeOnSearchInput(images) {\r\n  if (imageApiService.query === '') {\r\n      clearCountysContainer();\r\n      // loadMoreBtn.hide();\r\n      return noticeEmptyQuery();\r\n  } else if (images.hits.length === 0) {\r\n    return noticeNoImages();\r\n    }\r\n}\r\n\r\nfunction onKeydownEnter(evt) {\r\n    if (evt.code !== 'Enter') {\r\n        return\r\n    } else {\r\n      evt.preventDefault();\r\n      onSerch();\r\n  };   \r\n};\r\n\r\nfunction onEntry(entries) {\r\n    entries.forEach(entry => {\r\n      if (entry.isIntersecting && imageApiService.query !== '') {\r\n        imageApiService.fetchImages().then(images => {\r\n          appendImagesMarkup(images);\r\n        });\r\n        imageApiService.incrementPage();\r\n      }\r\n    });\r\n};\r\n\r\nconst observer = new IntersectionObserver(onEntry, {\r\n  rootMargin: '150px',\r\n});\r\nobserver.observe(refs.sentinel);\r\n\r\n// код кнопки Load More\r\n\r\n// import LoadMoreBtn from './js/load-more-images.js';\r\n// const loadMoreBtn = new LoadMoreBtn({\r\n//   selector: '[data-action=\"load-more\"]',\r\n//   hidden: true,\r\n// });\r\n\r\n// let targetCoord = 0;\r\n\r\n// loadMoreBtn.refs.button.addEventListener('click', loadMoreImages);\r\n\r\n// function fetchImagesOnClickLoadMore() {\r\n//   imageApiService.fetchImages().then(images => {\r\n//       noticeOnSearchInput(images)\r\n//       appendImagesMarkup(images);\r\n//       // loadMoreBtn.enable();\r\n//       //   window.scrollTo({\r\n//       //         top: targetCoord,\r\n//       //         left: 0,\r\n//       //         behavior: 'smooth',\r\n//       //       });\r\n//     });\r\n// }\r\n\r\n// async function loadMoreImages() {\r\n//   targetCoord = refs.galeryImages.offsetHeight;\r\n//   try {\r\n//     imageApiService.incrementPage();\r\n//     // loadMoreBtn.show();\r\n//     // loadMoreBtn.disable();\r\n//     fetchImagesOnClickLoadMore()\r\n//   } catch (error) {\r\n//     console.log(error);\r\n//   }\r\n  \r\n// };","import * as basicLightbox from 'basiclightbox';\r\nimport 'basiclightbox/dist/basicLightbox.min.css';\r\n\r\nexport default function onOpenModal(event) {\r\n\r\n    if (event.target.nodeName !== 'IMG') {\r\n        return;\r\n    }\r\n    const instance = basicLightbox.create(`<img src=\"${event.target.dataset.src}\" alt=\"\" />`);\r\n    instance.show();\r\n}","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class=\\\"photo-card\\\">\\r\\n            <img src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" data-src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"tags\") : depth0), depth0))\n    + \"\\\" width=\\\"400\\\" height=\\\"250\\\"/>\\r\\n        \\r\\n            <div class=\\\"stats\\\">\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                    <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                    \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                    <i class=\\\"material-icons\\\">visibility</i>\\r\\n                    \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                    <i class=\\\"material-icons\\\">comment</i>\\r\\n                    \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                    <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                    \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n                </p>\\r\\n            </div>\\r\\n        </div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hits\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":8},\"end\":{\"line\":25,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"\\r\\n  \\r\\n\";\n},\"useData\":true});"],"sourceRoot":""}